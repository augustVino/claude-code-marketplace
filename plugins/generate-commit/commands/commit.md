# Claude 命令：提交

这个命令帮助您创建规范的 Git 提交，自动生成符合约定式提交规范的消息并配上合适的表情符号。

## 使用方法

要创建提交，只需输入：

```
/commit
```

或者使用选项：

```
/commit --check
```

## 功能说明

1. 可选择性运行预提交检查（仅在指定 `--check` 时）：
   - `pnpm lint` 检查代码质量
   - `pnpm build` 验证构建是否成功
   - `pnpm generate:docs` 更新项目文档
2. 检查当前暂存的文件状态
3. 如果没有暂存文件，自动添加所有修改和新增的文件
4. 分析代码变更内容，理解本次提交的改动
5. 智能判断是否包含多个不相关的逻辑变更
6. 如果发现多个独立变更，建议拆分成多个小提交
7. 为每个提交生成符合规范的消息，包含合适的表情符号和类型标识

## 提交最佳实践

- **提交前检查**：确保代码通过检查、构建成功且文档已同步更新
- **原子化提交**：每个提交只包含一个明确目标的相关修改
- **合理拆分**：如果一次修改涉及多个不同的功能或模块，应该拆分成多个独立的提交
- **规范化格式**：使用 `<类型>: <描述>` 的格式，其中类型包括：
  - `feat`：新功能
  - `fix`：错误修复
  - `docs`：文档更改
  - `style`：代码样式更改（格式化等）
  - `refactor`：既不修复错误也不添加功能的代码更改
  - `perf`：性能改进
  - `test`：添加或修复测试
  - `chore`：构建过程、工具等的更改
- **用词规范**：使用祈使语气的动词开头（如 "add feature" 而非 "added feature"）
- **简洁明了**：提交消息第一行不超过 72 个字符
- **表情符号**：不同类型的提交会自动配上相应的表情符号：
  - ✨ `feat`：新功能
  - 🐛 `fix`：错误修复
  - 📝 `docs`：文档
  - 💄 `style`：格式化/样式
  - ♻️ `refactor`：代码重构
  - ⚡️ `perf`：性能改进
  - ✅ `test`：测试
  - 🔧 `chore`：工具、配置
  - 🚀 `ci`：CI/CD 改进
  - 🗑️ `revert`：回滚更改
  - 🧪 `test`：添加失败测试
  - 🚨 `fix`：修复编译器/检查器警告
  - 🔒️ `fix`：修复安全问题
  - 👥 `chore`：更新贡献者信息
  - 🚚 `refactor`：移动或重命名文件资源
  - 🏗️ `refactor`：调整项目架构
  - 🔀 `chore`：合并代码分支
  - 📦️ `chore`：更新打包文件或依赖包
  - ➕ `chore`：添加依赖
  - ➖ `chore`：移除依赖
  - 🌱 `chore`：更新数据初始化文件
  - 🧑‍💻 `chore`：优化开发者工作流程
  - 🧵 `feat`：实现多线程或并发处理功能
  - 🔍️ `feat`：优化搜索引擎收录（SEO）
  - 🏷️ `feat`：更新 TypeScript 类型定义
  - 💬 `feat`：更新文案或文本内容
  - 🌐 `feat`：实现国际化和本地化功能
  - 👔 `feat`：添加或更新业务逻辑
  - 📱 `feat`：实现移动端适配或响应式设计
  - 🚸 `feat`：优化用户交互体验
  - 🩹 `fix`：修复轻微的非关键问题
  - 🥅 `fix`：添加错误处理机制
  - 👽️ `fix`：适配第三方 API 接口变更
  - 🔥 `fix`：清理冗余或废弃的代码文件
  - 🎨 `style`：优化代码结构和格式
  - 🚑️ `fix`：紧急修复关键问题
  - 🎉 `chore`：初始化项目或重大里程碑
  - 🔖 `chore`：发布新版本或打标签
  - 🚧 `wip`：工作进行中（临时提交）
  - 💚 `fix`：修复持续集成构建问题
  - 📌 `chore`：锁定依赖包版本
  - 👷 `ci`：配置或优化持续集成系统
  - 📈 `feat`：实现数据统计或用户行为跟踪
  - ✏️ `fix`：修复拼写错误
  - ⏪️ `revert`：回滚更改
  - 📄 `chore`：更新项目许可证文件
  - 💥 `feat`：引入不兼容的重大变更
  - 🍱 `assets`：添加或更新资源
  - ♿️ `feat`：改进可访问性
  - 💡 `docs`：在源代码中添加或更新注释
  - 🗃️ `db`：执行数据库相关更改
  - 🔊 `feat`：添加或更新日志
  - 🔇 `fix`：移除日志
  - 🤡 `test`：添加模拟数据或模拟功能
  - 🥚 `feat`：添加隐藏功能或彩蛋
  - 🙈 `chore`：更新 .gitignore 忽略文件
  - 📸 `test`：更新测试快照
  - ⚗️ `experiment`：实验性功能或测试
  - 🚩 `feat`：添加、更新或移除功能标志
  - 💫 `ui`：添加或更新动画和过渡
  - ⚰️ `refactor`：移除死代码
  - 🦺 `feat`：添加或更新验证相关代码
  - ✈️ `feat`：改进离线支持

## 拆分提交的指导原则

在分析代码变更时，可以按以下标准考虑拆分提交：

1. **功能领域**：修改涉及不同的功能模块或业务领域
2. **变更类型**：混合了新功能、错误修复、代码重构等不同类型的修改
3. **文件类型**：同时修改了源代码、文档、配置等不同类型的文件
4. **逻辑关联**：包含多个独立的逻辑变更，分开提交更易理解和审查
5. **变更规模**：单次修改过于庞大，拆分后更易阅读和维护

## 示例

提交消息示例：

- ✨ feat: 添加用户认证系统
- 🐛 fix: 解决渲染过程中的内存泄漏
- 📝 docs: 使用新端点更新 API 文档
- ♻️ refactor: 简化解析器中的错误处理逻辑
- 🚨 fix: 解决组件文件中的检查器警告
- 🧑‍💻 chore: 改进开发者工具设置过程
- 👔 feat: 实现交易验证的业务逻辑
- 🩹 fix: 解决头部的轻微样式不一致
- 🚑️ fix: 修补认证流程中的关键安全漏洞
- 🎨 style: 重新组织组件结构以提高可读性
- 🔥 fix: 移除已弃用的遗留代码
- 🦺 feat: 为用户注册表单添加输入验证
- 💚 fix: 解决失败的 CI 管道测试
- 📈 feat: 实现用户参与度分析跟踪
- 🔒️ fix: 加强认证密码要求
- ♿️ feat: 改进表单对屏幕阅读器的可访问性

拆分提交的实际案例：

- 提交 1：✨ feat: 添加新的 solc 版本类型定义
- 提交 2：📝 docs: 更新 solc 新版本相关文档
- 提交 3：🔧 chore: 升级 package.json 中的依赖包
- 提交 4：🏷️ feat: 为新 API 接口添加类型定义
- 提交 5：🧵 feat: 优化工作线程的并发处理逻辑
- 提交 6：🚨 fix: 修复新代码中的语法检查问题
- 提交 7：✅ test: 为 solc 新版本功能添加单元测试
- 提交 8：🔒️ fix: 修复依赖包中的安全漏洞

## 命令选项

- `--check`：执行预提交检查步骤（包括 lint、build、generate:docs）

## 重要说明

- 默认情况下不执行预提交检查，快速完成提交流程
- 使用 `--check` 参数时会执行完整的预提交检查流程
- 如果检查失败，会提示您选择继续提交或先解决问题
- 如果已有文件在暂存区，只会提交这些文件
- 如果暂存区为空，会自动添加所有已修改和新增的文件
- 根据代码变更内容智能生成提交消息
- 提交前会分析变更内容，判断是否需要拆分成多个提交
- 如果建议拆分，会指导您逐个暂存和提交相关变更
- 始终保证提交消息与实际代码变更内容保持一致
